webpackJsonp([1],{10:function(e,t,a){a(35);var i=a(8)(a(30),a(40),null,null);e.exports=i.exports},29:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),s=a.n(i),r=a(10),o=a.n(r),n=a(9);new s.a({el:"#app",router:n.a,template:"<App/>",components:{App:o.a}})},30:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},31:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(32),s=a.n(i),r=a(11),o=a.n(r),n=a(37),l=a.n(n),d=a(46),u=a.n(d),v=a(45),c=a.n(v);t.default={name:"riverflow",data:function(){return{backgroundColor:null,condition:null,error:null,graphImage:null,latestCfs:null,latestDate:null,latestTime:null,latitude:null,loading:!1,loadingEl:document.querySelector(".loading"),longitude:null,mapUrl:null,period:7,siteName:null,startDate:null,endDate:(new Date).toISOString().split("T")[0],valueBaseUrl:"https://waterservices.usgs.gov/nwis/iv/?format=json&period=P1D",graphBaseUrl:"//waterdata.usgs.gov/nwisweb/graph?agency_cd=USGS",graphType:"00060",STORAGE_KEY:"riverflow-history",selected:"selectRiver",baseMapUrl:"//maps.google.com/?q=",options:u.a.data,history:[],radioDateType:"period"}},mounted:function(){var e=this;"RiverflowUrl"===this.$route.name&&this.setSelectedRiver(this.$route.params.river),this.fetchHistory(),new l.a(this.$el.querySelector(".graph-start")),new l.a(this.$el.querySelector(".graph-end"),{maxDate:e.endDate})},watch:{selected:"getUsgsData",loading:"toggleLoading"},methods:{setSelectedRiver:function(e){var t=this;this.options.forEach(function(a,i){t.formatRiverName(a.text)===e&&(t.selected=a.value)})},changeRiver:function(e){this.selected=e.target[e.target.selectedIndex].value},getUsgsData:function(){var e=this,t=this.valueBaseUrl+"&parameterCd="+this.graphType+"&sites="+this.selected;"selectRiver"!==this.selected&&this.selected&&(this.loading=!0,o.a.get(t).then(function(t){e.loading=!1,t.data.value.timeSeries[0]?(e.displayUsgsData(t.data.value.timeSeries[0]),e.displayGraph(),e.error=null):e.error="no river data available"}).catch(function(t){console.error(t.message),e.loading=!1,e.error=t.message}))},displayUsgsData:function(e){var t=e.values,a=t[0].value.reverse()[0],i=new Date(a.dateTime);this.latestCfs=a.value,this.siteName=e.sourceInfo.siteName,this.latitude=e.sourceInfo.geoLocation.geogLocation.latitude,this.longitude=e.sourceInfo.geoLocation.geogLocation.longitude,this.latestDate=i.toDateString(),this.latestTime=i.toLocaleTimeString(),this.addHistory(),this.displayConditions(parseInt(this.latestCfs,10)),this.mapUrl=this.baseMapUrl+this.latitude+",+"+this.longitude},displayGraph:function(){var e,t=this.graphBaseUrl+"&parm_cd="+this.graphType+"&site_no="+this.selected;return"period"===this.radioDateType&&(t=t+"&period="+this.period),"date"===this.radioDateType&&this.startDate&&(t=t+"&begin_date="+this.startDate+"&end_date="+this.endDate),e='<img src="'+t+'"class="graph" alt="USGS Water-data graph">',this.graphImage=e,e},displayConditions:function(e){return 0===e?this.condition=c.a.flow0:e>0&&e<50?this.condition=c.a.flow1:e>=50&&e<100?this.condition=c.a.flow2:e>=100&&e<300?this.condition=c.a.flow3:e>=300&&e<600?this.condition=c.a.flow4:e>=600&&e<2e3?this.condition=c.a.flow5:e>=2e3&&(this.condition=c.a.flow6),this.condition},formatRiverName:function(e){var t=e;return t=t.toLowerCase(),t=t.replace(/ /g,""),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/-(\S*)-/g,"")},fetchHistory:function(){var e=this;return JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"[]").forEach(function(t,a){e.history.push(t)}),this.history},saveHistory:function(e){localStorage.setItem(this.STORAGE_KEY,s()(e))},addHistory:function(){this.history.length>=7&&this.history.pop(),this.history.unshift({cfs:this.latestCfs,name:this.siteName,time:this.latestTime,date:this.latestDate}),this.saveHistory(this.history)},removeHistory:function(e){this.history.splice(this.history.indexOf(e),1)},selectBackground:function(e){this.backgroundColor=e.target.value,document.body.style.backgroundColor=e.target.value},toggleLoading:function(){var e=!0===this.loading?"flex":"none";this.loadingEl.style.display=e}}}},35:function(e,t){},36:function(e,t){},39:function(e,t,a){a(36);var i=a(8)(a(31),a(41),null,null);e.exports=i.exports},40:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},41:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"riverflow"},[e._m(0),e._v(" "),a("div",{staticClass:"select-river-wrapper"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"select-river",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?a:a[0]},e.changeRiver]}},e._l(e.options,function(t){return a("option",{attrs:{disabled:""===t.value},domProps:{value:t.value}},[e._v("\n        "+e._s(t.text)+"\n      ")])}))]),e._v(" "),a("div",{staticClass:"graph-options"},[a("div",{staticClass:"graph-controls-menu"},[a("label",{staticClass:"graph-radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.radioDateType,expression:"radioDateType"}],attrs:{type:"radio",id:"radio-dates-period",value:"period"},domProps:{checked:e._q(e.radioDateType,"period")},on:{__c:function(t){e.radioDateType="period"}}}),e._v(" "),a("span",{staticClass:"radio-title"},[e._v("Search by number of days Â ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.period,expression:"period"},{name:"show",rawName:"v-show",value:"period"===e.radioDateType,expression:"radioDateType === 'period'"}],staticClass:"graph-period",attrs:{type:"number",min:"7",max:"90"},domProps:{value:e.period},on:{input:function(t){t.target.composing||(e.period=t.target.value)},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),a("label",{staticClass:"graph-radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.radioDateType,expression:"radioDateType"}],attrs:{type:"radio",id:"radio-dates-date",value:"date"},domProps:{checked:e._q(e.radioDateType,"date")},on:{__c:function(t){e.radioDateType="date"}}}),e._v(" "),a("span",[e._v("Search by a date range")])])]),e._v(" "),a("label",{directives:[{name:"show",rawName:"v-show",value:"date"===e.radioDateType,expression:"radioDateType === 'date'"}],staticClass:"graph-control-label"},[a("span",{staticClass:"label-name"},[e._v("start date")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.startDate,expression:"startDate"}],staticClass:"graph-start",attrs:{type:"text",placeholder:"Pick a date before today"},domProps:{value:e.startDate},on:{input:function(t){t.target.composing||(e.startDate=t.target.value)}}})]),e._v(" "),a("label",{directives:[{name:"show",rawName:"v-show",value:"date"===e.radioDateType,expression:"radioDateType === 'date'"}],staticClass:"graph-control-label"},[a("span",{staticClass:"label-name"},[e._v("end date")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.endDate,expression:"endDate"}],staticClass:"graph-end",attrs:{type:"text"},domProps:{value:e.endDate},on:{input:function(t){t.target.composing||(e.endDate=t.target.value)}}})])]),e._v(" "),e.error?a("div",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._v(" "),a("div",{staticClass:"condition-wrapper"},[e.latestCfs?a("div",{staticClass:"latest-cfs"},[a("div",{staticClass:"rate-group"},[a("span",{staticClass:"rate"},[e._v(e._s(e.latestCfs))]),e._v(" "),a("abbr",{staticClass:"rate-abbr",attrs:{title:"cubic feet per second"}},[e._v("CFS")])]),e._v(" "),e.mapUrl?a("a",{attrs:{href:e.mapUrl}},[e._v("Location of guage")]):e._e(),e._v(" "),a("div",{staticClass:"time-group"},[e.latestDate?a("span",[e._v(e._s(e.latestDate)+" at "+e._s(e.latestTime))]):e._e()])]):e._e(),e._v(" "),e.condition?a("div",{staticClass:"conditions"},[e._v(e._s(e.condition))]):e._e(),e._v(" "),e.history.length>1?a("div",{staticClass:"history"},[a("h4",{staticClass:"history-title"},[e._v("History")]),e._v(" "),a("ul",{staticClass:"time-history"},e._l(e.history,function(t){return a("li",[a("b",[e._v(e._s(t.cfs))]),e._v(" "),a("abbr",{staticClass:"cfs",attrs:{title:"cubic feet per second"}},[e._v("cfs")]),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),a("small",[e._v(e._s(t.date)+" at "+e._s(t.time))])])}))]):e._e()]),e._v(" "),a("div",{staticClass:"graph-wrapper",domProps:{innerHTML:e._s(e.graphImage)}},[e._v("loading...")]),e._v(" "),a("footer",[e._v("\n    created by "),a("a",{attrs:{href:"//mountaindrawn.com"}},[e._v("mountaindrawn.com")]),e._v(" "),a("input",{staticClass:"color-picker",attrs:{type:"color"},on:{change:e.selectBackground}}),e._v(" "),a("small",{staticClass:"color-value"},[e._v(e._s(e.backgroundColor))])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("h1",{staticClass:"title"},[e._v("Riverflow")]),e._v(" "),a("p",{staticClass:"tagline"},[e._v("Texas Edition")])])}]}},45:function(e,t){e.exports={flow0:"Sorry but this river is bone dry. Try a spring fed river like the San Marcos til we get more rain.",flow1:"The river is pretty much just a trickle right. Not much good for floating at the moment but a good rain should bring it up",flow2:"It's barely moving but it should be floatable in kayaks or tubes. Be prepared to drag bottom in spots though.",flow3:"This is a pretty leisurely flow but still fun. You shouldn't have any problems scraping bottom in canoes at this level",flow4:"Now we're talking! The river is flowing pretty good but not too dangerous. If the graph shows a sharp increase over the past week it may still be rising.",flow5:"The flow is moving now! Unless this is a large volume river like the Colorado or Rio Grande you can expect some really fast moving water.",flow6:"DANGER! Possible death awaits! Unless this is a large volume river like the Colorado you may drown. Check with a local outfitter for more details on conditions before heading out."}},46:function(e,t){e.exports={data:[{text:"Select a river",value:"selectRiver"},{text:"-- Brazos River Basin --",value:""},{text:"Brazos River : Palo Pinto",value:"08089000"},{text:"Brazos River : Glen Rose",value:"08091000"},{text:"Brazos River : Waco",value:"08096500"},{text:"Brazos River : Bryan",value:"08108700"},{text:"Lampasas River : Kempner",value:"08103800"},{text:"Lampasas River : Ding Dong",value:"08103940"},{text:"Lampasas River : Belton",value:"08104100"},{text:"-- Colorado River Basin --",value:""},{text:"Barton Springs",value:"08155500"},{text:"Barton Creek : Above Barton Springs",value:"08155400"},{text:"Barton Creek : Loop 360",value:"08155300"},{text:"Barton Creek : Lost Ck Blvd",value:"08155240"},{text:"Barton Creek : SH 71",value:"08155200"},{text:"Colorado River : Austin",value:"08158000"},{text:"Colorado River : Bastrop",value:"08159200"},{text:"Onion Creek : Hwy 183",value:"08159000"},{text:"Llano River : Llano",value:"08151500"},{text:"Llano River : Mason",value:"08150700"},{text:"Llano River : Junction",value:"08150000"},{text:"San Saba River : Menard",value:"08144500"},{text:"San Saba River : San Saba",value:"08146000"},{text:"-- Guadalupe River Basin --",value:""},{text:"Guadalupe River : Spring Branch",value:"08167500"},{text:"Guadalupe River : Sattler",value:"08167800"},{text:"Comal River : New Braunfels",value:"08168500"},{text:"Guadalupe River : FM 1117 nr Seguin",value:"08169792"},{text:"Guadalupe River : Gonzales",value:"08173900"},{text:"San Marcos River : San Marcos",value:"08170500"},{text:"San Marcos River : Luling",value:"08172000"},{text:"Blanco River : Wimberley",value:"08171000"},{text:"Blanco River : Kyle",value:"08171300"},{text:"-- Nueces River Basin --",value:""},{text:"Nueces River : Laguna",value:"08190000"},{text:"Frio River : Concan",value:"08195000"},{text:"-- Rio Grande Basin --",value:""},{text:"Rio Grande : Castolon",value:"08374550"},{text:"Rio Grande : Big Bend",value:"08375300"},{text:"Pecos River : Pecos",value:"08419000"},{text:"Pecos River : Girvin",value:"08446500"},{text:"-- San Antonio River Basin --",value:""},{text:"Medina River : Patterson Road",value:"0817887350"},{text:"Medina River : Bandera",value:"08178880"},{text:"San Antonio River : Goliad",value:"08188500"}]}},9:function(e,t,a){"use strict";var i=a(2),s=a.n(i),r=a(42),o=a(39),n=a.n(o);s.a.use(r.a),t.a=new r.a({routes:[{path:"/",name:"Riverflow",component:n.a},{path:"/:river",name:"RiverflowUrl",component:n.a}]})}},[29]);
//# sourceMappingURL=app.fa99edaaa93763baae43.js.map